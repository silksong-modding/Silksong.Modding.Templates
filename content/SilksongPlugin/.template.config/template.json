{
  "$schema": "http://json.schemastore.org/template",
  "author": "BadMagic",
  "classifications": [ "Mod", "Plugin", "silksong", "BepInEx" ],
  "identity": "Silksong.Modding.Plugin",
  "name": "Silksong Modding Plugin",
  "shortName": "silksongplugin",
  "sourceName": "SilksongPlugin.1",
  "defaultName": "SilksongMod1",
  "primaryOutputs": [
    {
      "path": "SilksongPlugin.1.csproj"
    }
  ],
  "tags": {
    "language": "C#",
    "type": "project"
  },
  "symbols": {
    "silksong-install-path": {
      "type": "parameter",
      "datatype": "string",
      "defaultValue": "C:/Program Files (x86)/Steam/steamapps/common/Hollow Knight Silksong",
      "replaces": "SilksongInstallPath",
      "displayName": "Silksong Install Path",
      "description": "The installation path of Silksong"
    },
    "game-version": {
      "type": "parameter",
      "dataType": "choice",
      "replaces": "SilksongVersion",
      "displayName": "Game Version",
      "description": "The version of Silksong being modded.",
      "isRequired": true,
      "choices": [
        {
          "choice": "1.0.28714",
          "description": "Undocumented patch for all platforms. Contains the patch for CVE-2025-59489 on Windows and Mac. Released Sept 24 2025/patched Oct 3."
        },
        {
          "choice": "1.0.28650",
          "description": "Second real bugfix patch. Released Sept 22 2025."
        },
        {
          "choice": "1.0.28561",
          "description": "Second (less documented) bugfix and balance patch. Released Sept 12 2025."
        },
        {
          "choice": "1.0.28497",
          "description": "First bugfix and balance patch. Released Sept 12 2025."
        },
        {
          "choice": "1.0.28324",
          "description": "Initial release. Released Sept 4 2025."
        }
      ]
    },
    "polysharp": {
      "type": "parameter",
      "datatype": "bool",
      "displayName": "Enable PolySharp?",
      "description": "Whether to enable PolySharp to polyfill newer language features that do not require runtime support.",
      "defaultValue": "false"
    },
    "unity-version": {
      "type": "generated",
      "replaces": "UnityVersion",
      "generator": "switch",
      "parameters": {
        "dataType": "string",
        "cases": [
          {
            "condition": "game-version == '1.0.28324' || game-version == '1.0.28497' || game-version == '1.0.28561' || game-version == '1.0.28650' || game-version == '1.0.28714'",
            "value": "6000.0.50"
          }
        ]
      }
    },
    "safe-source-name": {
      // I think it's really really cool that value forms of sourceName are not applied to file names by default
      "type": "derived",
      "valueSource": "name",
      "valueTransform": "safe_name",
      "fileRename": "SilksongPlugin__1"
    }
  },
  "postActions": [
    {
      "description": "Adding reference to PolySharp",
      "actionId": "B17581D1-C5C9-4489-8F0A-004BE667B814",
      "condition": "polysharp",
      "manualInstructions": [
        {
          "text": "Run `dotnet add package PolySharp`"
        }
      ],
      "args": {
        "referenceType": "package",
        "reference": "PolySharp"
      }
    },
    {
      "description": "Restore dependencies",
      "manualInstructions": [
        {
          "text": "Run `dotnet restore`"
        }
      ],
      "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025"
    }
  ]
}
